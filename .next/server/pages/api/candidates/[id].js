"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/candidates/[id]";
exports.ids = ["pages/api/candidates/[id]"];
exports.modules = {

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-connect");;

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcandidates%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fcandidates%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcandidates%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fcandidates%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_candidates_id_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/candidates/[id].js */ \"(api)/./src/pages/api/candidates/[id].js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_candidates_id_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_candidates_id_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_candidates_id_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_candidates_id_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/candidates/[id]\",\n        pathname: \"/api/candidates/[id]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_candidates_id_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNhbmRpZGF0ZXMlMkYlNUJpZCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGY2FuZGlkYXRlcyUyRiU1QmlkJTVELmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQytEO0FBQy9EO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw0REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsNERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRzLXN5c3RlbS8/NGU4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9jYW5kaWRhdGVzL1tpZF0uanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jYW5kaWRhdGVzL1tpZF1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jYW5kaWRhdGVzL1tpZF1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcandidates%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fcandidates%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/database.js":
/*!*****************************!*\
  !*** ./src/lib/database.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCandidate: () => (/* binding */ addCandidate),\n/* harmony export */   deleteCandidate: () => (/* binding */ deleteCandidate),\n/* harmony export */   getCandidateById: () => (/* binding */ getCandidateById),\n/* harmony export */   getCandidates: () => (/* binding */ getCandidates),\n/* harmony export */   updateCandidate: () => (/* binding */ updateCandidate)\n/* harmony export */ });\n/**\n * Base de datos en memoria para almacenar los candidatos\n * En un entorno de producción, esto sería una base de datos real\n */ // Almacén de datos compartido\nconst db = {\n    candidates: []\n};\n/**\n * Obtiene todos los candidatos\n * @param {Object} options - Opciones de paginación y filtrado\n * @returns {Array} - Lista de candidatos\n */ const getCandidates = (options = {})=>{\n    const { page = 1, limit = 10, search = \"\" } = options;\n    // Aplicar filtro si hay un término de búsqueda\n    let filteredCandidates = [\n        ...db.candidates\n    ];\n    if (search) {\n        const searchLower = search.toLowerCase();\n        filteredCandidates = filteredCandidates.filter((candidate)=>candidate.personalInfo.name.toLowerCase().includes(searchLower) || candidate.personalInfo.surnames.toLowerCase().includes(searchLower) || candidate.personalInfo.email.toLowerCase().includes(searchLower));\n    }\n    // Calcular metadatos de paginación\n    const totalItems = filteredCandidates.length;\n    const totalPages = Math.ceil(totalItems / limit);\n    // Aplicar paginación\n    const startIndex = (page - 1) * limit;\n    const endIndex = page * limit;\n    const paginatedCandidates = filteredCandidates.slice(startIndex, endIndex);\n    return {\n        data: paginatedCandidates,\n        meta: {\n            page: parseInt(page),\n            limit: parseInt(limit),\n            totalItems,\n            totalPages\n        }\n    };\n};\n/**\n * Obtiene un candidato por ID\n * @param {string} id - ID del candidato\n * @returns {Object|null} - Candidato encontrado o null\n */ const getCandidateById = (id)=>{\n    const candidate = db.candidates.find((c)=>c.id === id);\n    return candidate || null;\n};\n/**\n * Añade un nuevo candidato\n * @param {Object} candidateData - Datos del candidato\n * @returns {Object} - Candidato creado\n */ const addCandidate = (candidateData)=>{\n    const newCandidate = {\n        ...candidateData,\n        id: candidateData.id || generateId(),\n        createdAt: new Date().toISOString()\n    };\n    db.candidates.push(newCandidate);\n    return newCandidate;\n};\n/**\n * Actualiza un candidato existente\n * @param {string} id - ID del candidato\n * @param {Object} candidateData - Nuevos datos del candidato\n * @returns {Object|null} - Candidato actualizado o null\n */ const updateCandidate = (id, candidateData)=>{\n    const index = db.candidates.findIndex((c)=>c.id === id);\n    if (index === -1) return null;\n    const updatedCandidate = {\n        ...db.candidates[index],\n        ...candidateData,\n        id,\n        updatedAt: new Date().toISOString()\n    };\n    db.candidates[index] = updatedCandidate;\n    return updatedCandidate;\n};\n/**\n * Elimina un candidato\n * @param {string} id - ID del candidato\n * @returns {boolean} - true si se eliminó, false si no existía\n */ const deleteCandidate = (id)=>{\n    const initialLength = db.candidates.length;\n    db.candidates = db.candidates.filter((c)=>c.id !== id);\n    return db.candidates.length < initialLength;\n};\n/**\n * Genera un ID único\n * @returns {string} - ID único\n */ const generateId = ()=>{\n    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0VoQixLQUFLNEIsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUcsTUFDeEM5QixLQUFLNEIsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUc7QUFFNUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdHMtc3lzdGVtLy4vc3JjL2xpYi9kYXRhYmFzZS5qcz80Nzg3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQmFzZSBkZSBkYXRvcyBlbiBtZW1vcmlhIHBhcmEgYWxtYWNlbmFyIGxvcyBjYW5kaWRhdG9zXG4gKiBFbiB1biBlbnRvcm5vIGRlIHByb2R1Y2Npw7NuLCBlc3RvIHNlcsOtYSB1bmEgYmFzZSBkZSBkYXRvcyByZWFsXG4gKi9cblxuLy8gQWxtYWPDqW4gZGUgZGF0b3MgY29tcGFydGlkb1xuY29uc3QgZGIgPSB7XG4gIGNhbmRpZGF0ZXM6IFtdLFxufTtcblxuLyoqXG4gKiBPYnRpZW5lIHRvZG9zIGxvcyBjYW5kaWRhdG9zXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIE9wY2lvbmVzIGRlIHBhZ2luYWNpw7NuIHkgZmlsdHJhZG9cbiAqIEByZXR1cm5zIHtBcnJheX0gLSBMaXN0YSBkZSBjYW5kaWRhdG9zXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYW5kaWRhdGVzID0gKG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCB7IHBhZ2UgPSAxLCBsaW1pdCA9IDEwLCBzZWFyY2ggPSBcIlwiIH0gPSBvcHRpb25zO1xuXG4gIC8vIEFwbGljYXIgZmlsdHJvIHNpIGhheSB1biB0w6lybWlubyBkZSBiw7pzcXVlZGFcbiAgbGV0IGZpbHRlcmVkQ2FuZGlkYXRlcyA9IFsuLi5kYi5jYW5kaWRhdGVzXTtcblxuICBpZiAoc2VhcmNoKSB7XG4gICAgY29uc3Qgc2VhcmNoTG93ZXIgPSBzZWFyY2gudG9Mb3dlckNhc2UoKTtcbiAgICBmaWx0ZXJlZENhbmRpZGF0ZXMgPSBmaWx0ZXJlZENhbmRpZGF0ZXMuZmlsdGVyKFxuICAgICAgKGNhbmRpZGF0ZSkgPT5cbiAgICAgICAgY2FuZGlkYXRlLnBlcnNvbmFsSW5mby5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XG4gICAgICAgIGNhbmRpZGF0ZS5wZXJzb25hbEluZm8uc3VybmFtZXMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcbiAgICAgICAgY2FuZGlkYXRlLnBlcnNvbmFsSW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKVxuICAgICk7XG4gIH1cblxuICAvLyBDYWxjdWxhciBtZXRhZGF0b3MgZGUgcGFnaW5hY2nDs25cbiAgY29uc3QgdG90YWxJdGVtcyA9IGZpbHRlcmVkQ2FuZGlkYXRlcy5sZW5ndGg7XG4gIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWxJdGVtcyAvIGxpbWl0KTtcblxuICAvLyBBcGxpY2FyIHBhZ2luYWNpw7NuXG4gIGNvbnN0IHN0YXJ0SW5kZXggPSAocGFnZSAtIDEpICogbGltaXQ7XG4gIGNvbnN0IGVuZEluZGV4ID0gcGFnZSAqIGxpbWl0O1xuICBjb25zdCBwYWdpbmF0ZWRDYW5kaWRhdGVzID0gZmlsdGVyZWRDYW5kaWRhdGVzLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcblxuICByZXR1cm4ge1xuICAgIGRhdGE6IHBhZ2luYXRlZENhbmRpZGF0ZXMsXG4gICAgbWV0YToge1xuICAgICAgcGFnZTogcGFyc2VJbnQocGFnZSksXG4gICAgICBsaW1pdDogcGFyc2VJbnQobGltaXQpLFxuICAgICAgdG90YWxJdGVtcyxcbiAgICAgIHRvdGFsUGFnZXMsXG4gICAgfSxcbiAgfTtcbn07XG5cbi8qKlxuICogT2J0aWVuZSB1biBjYW5kaWRhdG8gcG9yIElEXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBJRCBkZWwgY2FuZGlkYXRvXG4gKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IC0gQ2FuZGlkYXRvIGVuY29udHJhZG8gbyBudWxsXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYW5kaWRhdGVCeUlkID0gKGlkKSA9PiB7XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IGRiLmNhbmRpZGF0ZXMuZmluZCgoYykgPT4gYy5pZCA9PT0gaWQpO1xuICByZXR1cm4gY2FuZGlkYXRlIHx8IG51bGw7XG59O1xuXG4vKipcbiAqIEHDsWFkZSB1biBudWV2byBjYW5kaWRhdG9cbiAqIEBwYXJhbSB7T2JqZWN0fSBjYW5kaWRhdGVEYXRhIC0gRGF0b3MgZGVsIGNhbmRpZGF0b1xuICogQHJldHVybnMge09iamVjdH0gLSBDYW5kaWRhdG8gY3JlYWRvXG4gKi9cbmV4cG9ydCBjb25zdCBhZGRDYW5kaWRhdGUgPSAoY2FuZGlkYXRlRGF0YSkgPT4ge1xuICBjb25zdCBuZXdDYW5kaWRhdGUgPSB7XG4gICAgLi4uY2FuZGlkYXRlRGF0YSxcbiAgICBpZDogY2FuZGlkYXRlRGF0YS5pZCB8fCBnZW5lcmF0ZUlkKCksXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG5cbiAgZGIuY2FuZGlkYXRlcy5wdXNoKG5ld0NhbmRpZGF0ZSk7XG4gIHJldHVybiBuZXdDYW5kaWRhdGU7XG59O1xuXG4vKipcbiAqIEFjdHVhbGl6YSB1biBjYW5kaWRhdG8gZXhpc3RlbnRlXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBJRCBkZWwgY2FuZGlkYXRvXG4gKiBAcGFyYW0ge09iamVjdH0gY2FuZGlkYXRlRGF0YSAtIE51ZXZvcyBkYXRvcyBkZWwgY2FuZGlkYXRvXG4gKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IC0gQ2FuZGlkYXRvIGFjdHVhbGl6YWRvIG8gbnVsbFxuICovXG5leHBvcnQgY29uc3QgdXBkYXRlQ2FuZGlkYXRlID0gKGlkLCBjYW5kaWRhdGVEYXRhKSA9PiB7XG4gIGNvbnN0IGluZGV4ID0gZGIuY2FuZGlkYXRlcy5maW5kSW5kZXgoKGMpID0+IGMuaWQgPT09IGlkKTtcblxuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCB1cGRhdGVkQ2FuZGlkYXRlID0ge1xuICAgIC4uLmRiLmNhbmRpZGF0ZXNbaW5kZXhdLFxuICAgIC4uLmNhbmRpZGF0ZURhdGEsXG4gICAgaWQsIC8vIE1hbnRlbmVyIGVsIG1pc21vIElEXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH07XG5cbiAgZGIuY2FuZGlkYXRlc1tpbmRleF0gPSB1cGRhdGVkQ2FuZGlkYXRlO1xuICByZXR1cm4gdXBkYXRlZENhbmRpZGF0ZTtcbn07XG5cbi8qKlxuICogRWxpbWluYSB1biBjYW5kaWRhdG9cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIElEIGRlbCBjYW5kaWRhdG9cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIHRydWUgc2kgc2UgZWxpbWluw7MsIGZhbHNlIHNpIG5vIGV4aXN0w61hXG4gKi9cbmV4cG9ydCBjb25zdCBkZWxldGVDYW5kaWRhdGUgPSAoaWQpID0+IHtcbiAgY29uc3QgaW5pdGlhbExlbmd0aCA9IGRiLmNhbmRpZGF0ZXMubGVuZ3RoO1xuICBkYi5jYW5kaWRhdGVzID0gZGIuY2FuZGlkYXRlcy5maWx0ZXIoKGMpID0+IGMuaWQgIT09IGlkKTtcbiAgcmV0dXJuIGRiLmNhbmRpZGF0ZXMubGVuZ3RoIDwgaW5pdGlhbExlbmd0aDtcbn07XG5cbi8qKlxuICogR2VuZXJhIHVuIElEIMO6bmljb1xuICogQHJldHVybnMge3N0cmluZ30gLSBJRCDDum5pY29cbiAqL1xuY29uc3QgZ2VuZXJhdGVJZCA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpICtcbiAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpXG4gICk7XG59O1xuIl0sIm5hbWVzIjpbImRiIiwiY2FuZGlkYXRlcyIsImdldENhbmRpZGF0ZXMiLCJvcHRpb25zIiwicGFnZSIsImxpbWl0Iiwic2VhcmNoIiwiZmlsdGVyZWRDYW5kaWRhdGVzIiwic2VhcmNoTG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsImNhbmRpZGF0ZSIsInBlcnNvbmFsSW5mbyIsIm5hbWUiLCJpbmNsdWRlcyIsInN1cm5hbWVzIiwiZW1haWwiLCJ0b3RhbEl0ZW1zIiwibGVuZ3RoIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwicGFnaW5hdGVkQ2FuZGlkYXRlcyIsInNsaWNlIiwiZGF0YSIsIm1ldGEiLCJwYXJzZUludCIsImdldENhbmRpZGF0ZUJ5SWQiLCJpZCIsImZpbmQiLCJjIiwiYWRkQ2FuZGlkYXRlIiwiY2FuZGlkYXRlRGF0YSIsIm5ld0NhbmRpZGF0ZSIsImdlbmVyYXRlSWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwdXNoIiwidXBkYXRlQ2FuZGlkYXRlIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJ1cGRhdGVkQ2FuZGlkYXRlIiwidXBkYXRlZEF0IiwiZGVsZXRlQ2FuZGlkYXRlIiwiaW5pdGlhbExlbmd0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/database.js\n");

/***/ }),

/***/ "(api)/./src/pages/api/candidates/[id].js":
/*!******************************************!*\
  !*** ./src/pages/api/candidates/[id].js ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../lib/database */ \"(api)/./src/lib/database.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([next_connect__WEBPACK_IMPORTED_MODULE_0__, uuid__WEBPACK_IMPORTED_MODULE_2__]);\n([next_connect__WEBPACK_IMPORTED_MODULE_0__, uuid__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n// Importamos la configuración de multer similar a index.js\n// En producción, sería mejor tener un archivo de configuración compartido\nconst storage = multer__WEBPACK_IMPORTED_MODULE_1___default().diskStorage({\n    destination: (req, file, cb)=>{\n        const uploadDir = file.fieldname === \"cv\" ? \"./public/uploads/cv\" : \"./public/uploads/photos\";\n        if (!fs__WEBPACK_IMPORTED_MODULE_4___default().existsSync(uploadDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_4___default().mkdirSync(uploadDir, {\n                recursive: true\n            });\n        }\n        cb(null, uploadDir);\n    },\n    filename: (req, file, cb)=>{\n        const uniqueName = `${(0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)()}${path__WEBPACK_IMPORTED_MODULE_3___default().extname(file.originalname)}`;\n        cb(null, uniqueName);\n    }\n});\nconst fileFilter = (req, file, cb)=>{\n    if (file.fieldname === \"cv\") {\n        if (file.mimetype === \"application/pdf\" || file.mimetype === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\") {\n            cb(null, true);\n        } else {\n            cb(new Error(\"Formato de CV no v\\xe1lido. Solo se permiten archivos PDF o DOCX.\"), false);\n        }\n    } else if (file.fieldname === \"photo\") {\n        if (file.mimetype === \"image/jpeg\" || file.mimetype === \"image/png\" || file.mimetype === \"image/gif\" || file.mimetype === \"image/webp\") {\n            cb(null, true);\n        } else {\n            cb(new Error(\"Formato de imagen no v\\xe1lido. Solo se permiten JPEG, PNG, GIF o WEBP.\"), false);\n        }\n    } else {\n        cb(null, false);\n    }\n};\nconst upload = multer__WEBPACK_IMPORTED_MODULE_1___default()({\n    storage,\n    fileFilter,\n    limits: {\n        fileSize: 5 * 1024 * 1024\n    }\n});\nconst uploadMiddleware = upload.fields([\n    {\n        name: \"cv\",\n        maxCount: 1\n    },\n    {\n        name: \"photo\",\n        maxCount: 1\n    }\n]);\n// Crear el router\nconst router = (0,next_connect__WEBPACK_IMPORTED_MODULE_0__.createRouter)();\n// Middleware para manejar errores\nrouter.use(async (req, res, next)=>{\n    try {\n        await next();\n    } catch (error) {\n        console.error(\"Error en API de candidatos:\", error);\n        res.status(500).json({\n            success: false,\n            message: error.message || \"Error interno del servidor\"\n        });\n    }\n});\n// Manejador para GET - Obtener un candidato por ID\nrouter.get(async (req, res)=>{\n    try {\n        const { id } = req.query;\n        // Usar la función de la base de datos para obtener el candidato\n        const candidate = (0,_lib_database__WEBPACK_IMPORTED_MODULE_5__.getCandidateById)(id);\n        if (!candidate) {\n            return res.status(404).json({\n                success: false,\n                message: \"Candidato no encontrado\"\n            });\n        }\n        res.status(200).json({\n            success: true,\n            data: candidate\n        });\n    } catch (error) {\n        console.error(`Error al obtener candidato con ID ${req.query.id}:`, error);\n        res.status(500).json({\n            success: false,\n            message: \"Error al obtener el candidato\"\n        });\n    }\n});\n// Manejador para PUT - Actualizar un candidato\nrouter.put((req, res)=>{\n    // Usamos el middleware de carga de archivos\n    uploadMiddleware(req, res, (error)=>{\n        if (error) {\n            return res.status(400).json({\n                success: false,\n                message: error.message\n            });\n        }\n        try {\n            const { id } = req.query;\n            // Obtener el candidato actual\n            const currentCandidate = (0,_lib_database__WEBPACK_IMPORTED_MODULE_5__.getCandidateById)(id);\n            if (!currentCandidate) {\n                return res.status(404).json({\n                    success: false,\n                    message: \"Candidato no encontrado\"\n                });\n            }\n            // Parsear los datos actualizados\n            const personalInfo = JSON.parse(req.body.personalInfo || \"{}\");\n            const education = JSON.parse(req.body.education || \"[]\");\n            const experience = JSON.parse(req.body.experience || \"[]\");\n            // Validar campos obligatorios\n            if (!personalInfo.name || !personalInfo.surnames || !personalInfo.email || !personalInfo.phone) {\n                return res.status(400).json({\n                    success: false,\n                    message: \"Faltan campos obligatorios en la informaci\\xf3n personal\"\n                });\n            }\n            // Preparar documentos actualizados\n            const documents = {\n                ...currentCandidate.documents\n            };\n            // Actualizar CV si se proporcionó uno nuevo\n            if (req.files && req.files[\"cv\"]) {\n                // Eliminar el archivo anterior si existe\n                if (documents.cv && fs__WEBPACK_IMPORTED_MODULE_4___default().existsSync(`public${documents.cv}`)) {\n                    fs__WEBPACK_IMPORTED_MODULE_4___default().unlinkSync(`public${documents.cv}`);\n                }\n                documents.cv = req.files[\"cv\"][0].path.replace(\"public\", \"\");\n            }\n            // Actualizar foto si se proporcionó una nueva\n            if (req.files && req.files[\"photo\"]) {\n                // Eliminar el archivo anterior si existe\n                if (documents.photo && fs__WEBPACK_IMPORTED_MODULE_4___default().existsSync(`public${documents.photo}`)) {\n                    fs__WEBPACK_IMPORTED_MODULE_4___default().unlinkSync(`public${documents.photo}`);\n                }\n                documents.photo = req.files[\"photo\"][0].path.replace(\"public\", \"\");\n            }\n            // Actualizar el candidato usando la función de la base de datos\n            const updatedCandidate = (0,_lib_database__WEBPACK_IMPORTED_MODULE_5__.updateCandidate)(id, {\n                personalInfo,\n                education,\n                experience,\n                documents\n            });\n            res.status(200).json({\n                success: true,\n                data: updatedCandidate,\n                message: \"Candidato actualizado correctamente\"\n            });\n        } catch (error) {\n            console.error(`Error al actualizar candidato con ID ${req.query.id}:`, error);\n            res.status(500).json({\n                success: false,\n                message: \"Error al actualizar el candidato\"\n            });\n        }\n    });\n});\n// Manejador para DELETE - Eliminar un candidato\nrouter.delete(async (req, res)=>{\n    try {\n        const { id } = req.query;\n        // Obtener el candidato antes de eliminarlo\n        const candidate = (0,_lib_database__WEBPACK_IMPORTED_MODULE_5__.getCandidateById)(id);\n        if (!candidate) {\n            return res.status(404).json({\n                success: false,\n                message: \"Candidato no encontrado\"\n            });\n        }\n        // Eliminar archivos asociados\n        if (candidate.documents.cv && fs__WEBPACK_IMPORTED_MODULE_4___default().existsSync(`public${candidate.documents.cv}`)) {\n            fs__WEBPACK_IMPORTED_MODULE_4___default().unlinkSync(`public${candidate.documents.cv}`);\n        }\n        if (candidate.documents.photo && fs__WEBPACK_IMPORTED_MODULE_4___default().existsSync(`public${candidate.documents.photo}`)) {\n            fs__WEBPACK_IMPORTED_MODULE_4___default().unlinkSync(`public${candidate.documents.photo}`);\n        }\n        // Eliminar el candidato usando la función de la base de datos\n        const deleted = (0,_lib_database__WEBPACK_IMPORTED_MODULE_5__.deleteCandidate)(id);\n        if (!deleted) {\n            return res.status(500).json({\n                success: false,\n                message: \"Error al eliminar el candidato\"\n            });\n        }\n        res.status(200).json({\n            success: true,\n            message: \"Candidato eliminado correctamente\"\n        });\n    } catch (error) {\n        console.error(`Error al eliminar candidato con ID ${req.query.id}:`, error);\n        res.status(500).json({\n            success: false,\n            message: \"Error al eliminar el candidato\"\n        });\n    }\n});\n// Exportar el router como handler de la API\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router.handler());\n// Configuración para parsear correctamente el body con archivos\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDO2dCQUMxQkMsU0FBUztnQkFDVEMsU0FBUztZQUNYO1FBQ0Y7UUFFQVAsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsU0FBUztZQUNUQyxTQUFTO1FBQ1g7SUFDRixFQUFFLE9BQU9MLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsbUNBQW1DLEVBQUUxQixJQUFJa0MsS0FBSyxDQUFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUVQO1FBQ3JFRixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ25CQyxTQUFTO1lBQ1RDLFNBQVM7UUFDWDtJQUNGO0FBQ0Y7QUFFQSw0Q0FBNEM7QUFDNUMsaUVBQWVULE9BQU9tQyxPQUFPLEVBQUUsRUFBQztBQUVoQyxnRUFBZ0U7QUFDekQsTUFBTUMsU0FBUztJQUNwQkMsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXRzLXN5c3RlbS8uL3NyYy9wYWdlcy9hcGkvY2FuZGlkYXRlcy9baWRdLmpzPzg0MTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlUm91dGVyIH0gZnJvbSBcIm5leHQtY29ubmVjdFwiO1xuaW1wb3J0IG11bHRlciBmcm9tIFwibXVsdGVyXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7XG4gIGdldENhbmRpZGF0ZUJ5SWQsXG4gIHVwZGF0ZUNhbmRpZGF0ZSxcbiAgZGVsZXRlQ2FuZGlkYXRlLFxufSBmcm9tIFwiLi4vLi4vLi4vbGliL2RhdGFiYXNlXCI7XG5cbi8vIEltcG9ydGFtb3MgbGEgY29uZmlndXJhY2nDs24gZGUgbXVsdGVyIHNpbWlsYXIgYSBpbmRleC5qc1xuLy8gRW4gcHJvZHVjY2nDs24sIHNlcsOtYSBtZWpvciB0ZW5lciB1biBhcmNoaXZvIGRlIGNvbmZpZ3VyYWNpw7NuIGNvbXBhcnRpZG9cbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuICBkZXN0aW5hdGlvbjogKHJlcSwgZmlsZSwgY2IpID0+IHtcbiAgICBjb25zdCB1cGxvYWREaXIgPVxuICAgICAgZmlsZS5maWVsZG5hbWUgPT09IFwiY3ZcIlxuICAgICAgICA/IFwiLi9wdWJsaWMvdXBsb2Fkcy9jdlwiXG4gICAgICAgIDogXCIuL3B1YmxpYy91cGxvYWRzL3Bob3Rvc1wiO1xuXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyh1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIGNiKG51bGwsIHVwbG9hZERpcik7XG4gIH0sXG4gIGZpbGVuYW1lOiAocmVxLCBmaWxlLCBjYikgPT4ge1xuICAgIGNvbnN0IHVuaXF1ZU5hbWUgPSBgJHt1dWlkdjQoKX0ke3BhdGguZXh0bmFtZShmaWxlLm9yaWdpbmFsbmFtZSl9YDtcbiAgICBjYihudWxsLCB1bmlxdWVOYW1lKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBmaWxlRmlsdGVyID0gKHJlcSwgZmlsZSwgY2IpID0+IHtcbiAgaWYgKGZpbGUuZmllbGRuYW1lID09PSBcImN2XCIpIHtcbiAgICBpZiAoXG4gICAgICBmaWxlLm1pbWV0eXBlID09PSBcImFwcGxpY2F0aW9uL3BkZlwiIHx8XG4gICAgICBmaWxlLm1pbWV0eXBlID09PVxuICAgICAgICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50XCJcbiAgICApIHtcbiAgICAgIGNiKG51bGwsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYihcbiAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgIFwiRm9ybWF0byBkZSBDViBubyB2w6FsaWRvLiBTb2xvIHNlIHBlcm1pdGVuIGFyY2hpdm9zIFBERiBvIERPQ1guXCJcbiAgICAgICAgKSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGZpbGUuZmllbGRuYW1lID09PSBcInBob3RvXCIpIHtcbiAgICBpZiAoXG4gICAgICBmaWxlLm1pbWV0eXBlID09PSBcImltYWdlL2pwZWdcIiB8fFxuICAgICAgZmlsZS5taW1ldHlwZSA9PT0gXCJpbWFnZS9wbmdcIiB8fFxuICAgICAgZmlsZS5taW1ldHlwZSA9PT0gXCJpbWFnZS9naWZcIiB8fFxuICAgICAgZmlsZS5taW1ldHlwZSA9PT0gXCJpbWFnZS93ZWJwXCJcbiAgICApIHtcbiAgICAgIGNiKG51bGwsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYihcbiAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgIFwiRm9ybWF0byBkZSBpbWFnZW4gbm8gdsOhbGlkby4gU29sbyBzZSBwZXJtaXRlbiBKUEVHLCBQTkcsIEdJRiBvIFdFQlAuXCJcbiAgICAgICAgKSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNiKG51bGwsIGZhbHNlKTtcbiAgfVxufTtcblxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHtcbiAgc3RvcmFnZSxcbiAgZmlsZUZpbHRlcixcbiAgbGltaXRzOiB7XG4gICAgZmlsZVNpemU6IDUgKiAxMDI0ICogMTAyNCwgLy8gNU1CIG3DoXhpbW9cbiAgfSxcbn0pO1xuXG5jb25zdCB1cGxvYWRNaWRkbGV3YXJlID0gdXBsb2FkLmZpZWxkcyhbXG4gIHsgbmFtZTogXCJjdlwiLCBtYXhDb3VudDogMSB9LFxuICB7IG5hbWU6IFwicGhvdG9cIiwgbWF4Q291bnQ6IDEgfSxcbl0pO1xuXG4vLyBDcmVhciBlbCByb3V0ZXJcbmNvbnN0IHJvdXRlciA9IGNyZWF0ZVJvdXRlcigpO1xuXG4vLyBNaWRkbGV3YXJlIHBhcmEgbWFuZWphciBlcnJvcmVzXG5yb3V0ZXIudXNlKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGF3YWl0IG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gQVBJIGRlIGNhbmRpZGF0b3M6XCIsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiLFxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gTWFuZWphZG9yIHBhcmEgR0VUIC0gT2J0ZW5lciB1biBjYW5kaWRhdG8gcG9yIElEXG5yb3V0ZXIuZ2V0KGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5xdWVyeTtcblxuICAgIC8vIFVzYXIgbGEgZnVuY2nDs24gZGUgbGEgYmFzZSBkZSBkYXRvcyBwYXJhIG9idGVuZXIgZWwgY2FuZGlkYXRvXG4gICAgY29uc3QgY2FuZGlkYXRlID0gZ2V0Q2FuZGlkYXRlQnlJZChpZCk7XG5cbiAgICBpZiAoIWNhbmRpZGF0ZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IFwiQ2FuZGlkYXRvIG5vIGVuY29udHJhZG9cIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBjYW5kaWRhdGUsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgb2J0ZW5lciBjYW5kaWRhdG8gY29uIElEICR7cmVxLnF1ZXJ5LmlkfTpgLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBcIkVycm9yIGFsIG9idGVuZXIgZWwgY2FuZGlkYXRvXCIsXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBNYW5lamFkb3IgcGFyYSBQVVQgLSBBY3R1YWxpemFyIHVuIGNhbmRpZGF0b1xucm91dGVyLnB1dCgocmVxLCByZXMpID0+IHtcbiAgLy8gVXNhbW9zIGVsIG1pZGRsZXdhcmUgZGUgY2FyZ2EgZGUgYXJjaGl2b3NcbiAgdXBsb2FkTWlkZGxld2FyZShyZXEsIHJlcywgKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucXVlcnk7XG5cbiAgICAgIC8vIE9idGVuZXIgZWwgY2FuZGlkYXRvIGFjdHVhbFxuICAgICAgY29uc3QgY3VycmVudENhbmRpZGF0ZSA9IGdldENhbmRpZGF0ZUJ5SWQoaWQpO1xuXG4gICAgICBpZiAoIWN1cnJlbnRDYW5kaWRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkNhbmRpZGF0byBubyBlbmNvbnRyYWRvXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXJzZWFyIGxvcyBkYXRvcyBhY3R1YWxpemFkb3NcbiAgICAgIGNvbnN0IHBlcnNvbmFsSW5mbyA9IEpTT04ucGFyc2UocmVxLmJvZHkucGVyc29uYWxJbmZvIHx8IFwie31cIik7XG4gICAgICBjb25zdCBlZHVjYXRpb24gPSBKU09OLnBhcnNlKHJlcS5ib2R5LmVkdWNhdGlvbiB8fCBcIltdXCIpO1xuICAgICAgY29uc3QgZXhwZXJpZW5jZSA9IEpTT04ucGFyc2UocmVxLmJvZHkuZXhwZXJpZW5jZSB8fCBcIltdXCIpO1xuXG4gICAgICAvLyBWYWxpZGFyIGNhbXBvcyBvYmxpZ2F0b3Jpb3NcbiAgICAgIGlmIChcbiAgICAgICAgIXBlcnNvbmFsSW5mby5uYW1lIHx8XG4gICAgICAgICFwZXJzb25hbEluZm8uc3VybmFtZXMgfHxcbiAgICAgICAgIXBlcnNvbmFsSW5mby5lbWFpbCB8fFxuICAgICAgICAhcGVyc29uYWxJbmZvLnBob25lXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhbHRhbiBjYW1wb3Mgb2JsaWdhdG9yaW9zIGVuIGxhIGluZm9ybWFjacOzbiBwZXJzb25hbFwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyYXIgZG9jdW1lbnRvcyBhY3R1YWxpemFkb3NcbiAgICAgIGNvbnN0IGRvY3VtZW50cyA9IHsgLi4uY3VycmVudENhbmRpZGF0ZS5kb2N1bWVudHMgfTtcblxuICAgICAgLy8gQWN0dWFsaXphciBDViBzaSBzZSBwcm9wb3JjaW9uw7MgdW5vIG51ZXZvXG4gICAgICBpZiAocmVxLmZpbGVzICYmIHJlcS5maWxlc1tcImN2XCJdKSB7XG4gICAgICAgIC8vIEVsaW1pbmFyIGVsIGFyY2hpdm8gYW50ZXJpb3Igc2kgZXhpc3RlXG4gICAgICAgIGlmIChkb2N1bWVudHMuY3YgJiYgZnMuZXhpc3RzU3luYyhgcHVibGljJHtkb2N1bWVudHMuY3Z9YCkpIHtcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKGBwdWJsaWMke2RvY3VtZW50cy5jdn1gKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudHMuY3YgPSByZXEuZmlsZXNbXCJjdlwiXVswXS5wYXRoLnJlcGxhY2UoXCJwdWJsaWNcIiwgXCJcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIEFjdHVhbGl6YXIgZm90byBzaSBzZSBwcm9wb3JjaW9uw7MgdW5hIG51ZXZhXG4gICAgICBpZiAocmVxLmZpbGVzICYmIHJlcS5maWxlc1tcInBob3RvXCJdKSB7XG4gICAgICAgIC8vIEVsaW1pbmFyIGVsIGFyY2hpdm8gYW50ZXJpb3Igc2kgZXhpc3RlXG4gICAgICAgIGlmIChkb2N1bWVudHMucGhvdG8gJiYgZnMuZXhpc3RzU3luYyhgcHVibGljJHtkb2N1bWVudHMucGhvdG99YCkpIHtcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKGBwdWJsaWMke2RvY3VtZW50cy5waG90b31gKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudHMucGhvdG8gPSByZXEuZmlsZXNbXCJwaG90b1wiXVswXS5wYXRoLnJlcGxhY2UoXCJwdWJsaWNcIiwgXCJcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FuZGlkYXRvIHVzYW5kbyBsYSBmdW5jacOzbiBkZSBsYSBiYXNlIGRlIGRhdG9zXG4gICAgICBjb25zdCB1cGRhdGVkQ2FuZGlkYXRlID0gdXBkYXRlQ2FuZGlkYXRlKGlkLCB7XG4gICAgICAgIHBlcnNvbmFsSW5mbyxcbiAgICAgICAgZWR1Y2F0aW9uLFxuICAgICAgICBleHBlcmllbmNlLFxuICAgICAgICBkb2N1bWVudHMsXG4gICAgICB9KTtcblxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB1cGRhdGVkQ2FuZGlkYXRlLFxuICAgICAgICBtZXNzYWdlOiBcIkNhbmRpZGF0byBhY3R1YWxpemFkbyBjb3JyZWN0YW1lbnRlXCIsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEVycm9yIGFsIGFjdHVhbGl6YXIgY2FuZGlkYXRvIGNvbiBJRCAke3JlcS5xdWVyeS5pZH06YCxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgY2FuZGlkYXRvXCIsXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIE1hbmVqYWRvciBwYXJhIERFTEVURSAtIEVsaW1pbmFyIHVuIGNhbmRpZGF0b1xucm91dGVyLmRlbGV0ZShhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucXVlcnk7XG5cbiAgICAvLyBPYnRlbmVyIGVsIGNhbmRpZGF0byBhbnRlcyBkZSBlbGltaW5hcmxvXG4gICAgY29uc3QgY2FuZGlkYXRlID0gZ2V0Q2FuZGlkYXRlQnlJZChpZCk7XG5cbiAgICBpZiAoIWNhbmRpZGF0ZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IFwiQ2FuZGlkYXRvIG5vIGVuY29udHJhZG9cIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEVsaW1pbmFyIGFyY2hpdm9zIGFzb2NpYWRvc1xuICAgIGlmIChcbiAgICAgIGNhbmRpZGF0ZS5kb2N1bWVudHMuY3YgJiZcbiAgICAgIGZzLmV4aXN0c1N5bmMoYHB1YmxpYyR7Y2FuZGlkYXRlLmRvY3VtZW50cy5jdn1gKVxuICAgICkge1xuICAgICAgZnMudW5saW5rU3luYyhgcHVibGljJHtjYW5kaWRhdGUuZG9jdW1lbnRzLmN2fWApO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGNhbmRpZGF0ZS5kb2N1bWVudHMucGhvdG8gJiZcbiAgICAgIGZzLmV4aXN0c1N5bmMoYHB1YmxpYyR7Y2FuZGlkYXRlLmRvY3VtZW50cy5waG90b31gKVxuICAgICkge1xuICAgICAgZnMudW5saW5rU3luYyhgcHVibGljJHtjYW5kaWRhdGUuZG9jdW1lbnRzLnBob3RvfWApO1xuICAgIH1cblxuICAgIC8vIEVsaW1pbmFyIGVsIGNhbmRpZGF0byB1c2FuZG8gbGEgZnVuY2nDs24gZGUgbGEgYmFzZSBkZSBkYXRvc1xuICAgIGNvbnN0IGRlbGV0ZWQgPSBkZWxldGVDYW5kaWRhdGUoaWQpO1xuXG4gICAgaWYgKCFkZWxldGVkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogXCJFcnJvciBhbCBlbGltaW5hciBlbCBjYW5kaWRhdG9cIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcIkNhbmRpZGF0byBlbGltaW5hZG8gY29ycmVjdGFtZW50ZVwiLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGVsaW1pbmFyIGNhbmRpZGF0byBjb24gSUQgJHtyZXEucXVlcnkuaWR9OmAsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiRXJyb3IgYWwgZWxpbWluYXIgZWwgY2FuZGlkYXRvXCIsXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBFeHBvcnRhciBlbCByb3V0ZXIgY29tbyBoYW5kbGVyIGRlIGxhIEFQSVxuZXhwb3J0IGRlZmF1bHQgcm91dGVyLmhhbmRsZXIoKTtcblxuLy8gQ29uZmlndXJhY2nDs24gcGFyYSBwYXJzZWFyIGNvcnJlY3RhbWVudGUgZWwgYm9keSBjb24gYXJjaGl2b3NcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxuICB9LFxufTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVSb3V0ZXIiLCJtdWx0ZXIiLCJ2NCIsInV1aWR2NCIsInBhdGgiLCJmcyIsImdldENhbmRpZGF0ZUJ5SWQiLCJ1cGRhdGVDYW5kaWRhdGUiLCJkZWxldGVDYW5kaWRhdGUiLCJzdG9yYWdlIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsInVwbG9hZERpciIsImZpZWxkbmFtZSIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJmaWxlbmFtZSIsInVuaXF1ZU5hbWUiLCJleHRuYW1lIiwib3JpZ2luYWxuYW1lIiwiZmlsZUZpbHRlciIsIm1pbWV0eXBlIiwiRXJyb3IiLCJ1cGxvYWQiLCJsaW1pdHMiLCJmaWxlU2l6ZSIsInVwbG9hZE1pZGRsZXdhcmUiLCJmaWVsZHMiLCJuYW1lIiwibWF4Q291bnQiLCJyb3V0ZXIiLCJ1c2UiLCJyZXMiLCJuZXh0IiwiZXJyb3IiLCJjb25zb2xlIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZ2V0IiwiaWQiLCJxdWVyeSIsImNhbmRpZGF0ZSIsImRhdGEiLCJwdXQiLCJjdXJyZW50Q2FuZGlkYXRlIiwicGVyc29uYWxJbmZvIiwiSlNPTiIsInBhcnNlIiwiYm9keSIsImVkdWNhdGlvbiIsImV4cGVyaWVuY2UiLCJzdXJuYW1lcyIsImVtYWlsIiwicGhvbmUiLCJkb2N1bWVudHMiLCJmaWxlcyIsImN2IiwidW5saW5rU3luYyIsInJlcGxhY2UiLCJwaG90byIsInVwZGF0ZWRDYW5kaWRhdGUiLCJkZWxldGUiLCJkZWxldGVkIiwiaGFuZGxlciIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/candidates/[id].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcandidates%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fcandidates%2F%5Bid%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();